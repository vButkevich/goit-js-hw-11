{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nconst pixabay = async searchTerm => {\n  console.log(`pixabay:search=>[${searchTerm}]`);\n  const baseUrl = 'https://pixabay.com/api/';\n  const api_key = '42700764-e859e8fc9280be2dbaa9956c4';\n  const queryParams = {\n    key: api_key,\n    q: searchTerm,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n  const queryString = new URLSearchParams(queryParams).toString();\n  console.log('queryParams:', queryParams);\n  const url = `${baseUrl}?${queryString}`;\n  const options = {\n    method: 'GET',\n  };\n\n  try {\n    const response = await fetch(url, options);\n    const json = await response.json();\n    return json;\n  } catch (error) {\n    console.error('p:Error fetching images:', error);\n    throw error;\n  } finally {\n    console.log(`pixabay:search.end;`);\n  }\n};\n\nconsole.log('pixaBay.api:loaded...');\nexport default pixabay;\n","'use strict';\nconsole.log('renderData:v.2.03');\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst renderData = data => {\n  const gallery = document.getElementById('gallery');\n\n  gallery.innerHTML = '';\n  if (data.length === 0) {\n    return;\n  }\n\n  /*\n  //test:preview;\n  data.forEach(item => {\n    const imgElement = document.createElement('img');\n    imgElement.src = item.previewURL;\n    imgElement.alt = item.tags;\n    gallery.appendChild(imgElement);\n  });\n  */\n\n  let galleryHTML = data\n    .map(item => {\n      let galleryItem = `\n            <li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n                    <img class=\"gallery-image\" src=\"${item.webformatURL}\" alt=\"${item.tags}\" />\n                </a>\n                <ul class=\"item-info\">\n                    <li><h3 class=\"item-title\">Likes</h3>    <p class=\"item-text\">${item.likes}</p>\n                    <li><h3 class=\"item-title\">Views</h3>    <p class=\"item-text\">${item.views}</p>\n                    <li><h3 class=\"item-title\">Comments</h3> <p class=\"item-text\">${item.comments}</p>\n                    <li><h3 class=\"item-title\">Downloads</h3><p class=\"item-text\">${item.downloads}</p>\n                </ul>\n            </li>\n        `;\n      return galleryItem;\n    })\n    .join('');\n  gallery.innerHTML = `<ul class=\"gallery\">${galleryHTML}</ul>`;\n\n  var lightbox = new SimpleLightbox('.gallery a', {\n    // captionPosition: 'bottom',\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n};\n\nconsole.log('renderData:loaded...');\nexport default renderData;\n","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport pixabay from './js/pixabay-api';\nimport renderData from './js/render-functions';\n\n{\n  const form = document.getElementById('searchForm');\n  const input = document.getElementById('searchInput');\n  const loader = document.getElementById('loader');\n  // loader.style.display = 'none';\n\n  form.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    const searchTerm = input.value.trim();\n\n    if (searchTerm === '') {\n      let message = 'Please enter a search term.';\n      iziToast.error({\n        title: 'Error:',\n        message: message,\n        position: 'topRight',\n      });\n      return;\n    }\n\n    //loaderShow();\n    loader.style.display = 'block';\n\n    await setTimeout(async () => {\n      try {\n        let response = await pixabay(searchTerm);\n        console.log('m:data', response);\n        const data = response.hits;\n        console.log('m:hits:', data);\n\n        if (data.length === 0) {\n          renderData(data);\n          iziToast.error({\n            message: `main: Sorry, there are no images matching your search query: [${searchTerm}]. Please try again!`,\n          });\n          return;\n        }\n\n        renderData(data);\n      } catch (error) {\n        console.error('Error fetching images:', error);\n        iziToast.error({\n          title: 'Error:',\n          message:\n            'An error occurred while fetching images. Please try again later.',\n        });\n      } finally {\n        // loaderHide();\n        loader.style.display = 'none';\n        form.reset();\n      }\n    }, 3333);\n    //input.value = '';//clear input;\n    return;\n  });\n\n  // function loaderShow() {\n  //   console.log('loaderShow()');\n  //   loader.style.display = 'block';\n  // }\n  // function loaderHide() {\n  //   console.log('loaderHide()');\n  //   loader.style.display = 'none';\n  // }\n\n  // // Прослуховування подій перед відправленням запиту на бекенд\n  // document.addEventListener('beforeBackendRequest', loaderShow);\n  // // Прослуховування подій після отримання відповіді від бекенду\n  // document.addEventListener('afterBackendResponse', loaderHide);\n\n  // document.addEventListener('DOMContentLoaded', function () {\n  //   const loader = document.getElementById('loader');\n\n  //   // Функція для показу індикатора завантаження\n  //   function showLoader() {\n  //     console.log('loaderShow(2)');\n  //     loader.style.display = 'block';\n  //   }\n\n  //   // Функція для приховування індикатора завантаження\n  //   function hideLoader() {\n  //     console.log('loaderHide(2)');\n  //     loader.style.display = 'none';\n  //   }\n\n  //   // Прослуховування подій перед відправленням запиту на бекенд\n  //   document.addEventListener('beforeBackendRequest', showLoader);\n\n  //   // Прослуховування подій після отримання відповіді від бекенду\n  //   document.addEventListener('afterBackendResponse', hideLoader);\n  // });\n}\n"],"names":["pixabay","searchTerm","baseUrl","queryParams","queryString","url","options","error","renderData","data","gallery","galleryHTML","item","SimpleLightbox","form","input","loader","event","message","iziToast","response"],"mappings":"wvBAEA,MAAMA,EAAU,MAAMC,GAAc,CAClC,QAAQ,IAAI,oBAAoBA,CAAU,GAAG,EAC7C,MAAMC,EAAU,2BAEVC,EAAc,CAClB,IAFc,qCAGd,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,EACQG,EAAc,IAAI,gBAAgBD,CAAW,EAAE,SAAQ,EAC7D,QAAQ,IAAI,eAAgBA,CAAW,EACvC,MAAME,EAAM,GAAGH,CAAO,IAAIE,CAAW,GAC/BE,EAAU,CACd,OAAQ,KACZ,EAEE,GAAI,CAGF,OADa,MADI,MAAM,MAAMD,EAAKC,CAAO,GACb,MAE7B,OAAQC,EAAO,CACd,cAAQ,MAAM,2BAA4BA,CAAK,EACzCA,CACV,QAAY,CACR,QAAQ,IAAI,qBAAqB,CAClC,CACH,EAEA,QAAQ,IAAI,uBAAuB,EC/BnC,QAAQ,IAAI,mBAAmB,EAK/B,MAAMC,EAAaC,GAAQ,CACzB,MAAMC,EAAU,SAAS,eAAe,SAAS,EAGjD,GADAA,EAAQ,UAAY,GAChBD,EAAK,SAAW,EAClB,OAaF,IAAIE,EAAcF,EACf,IAAIG,GACe;AAAA;AAAA,gDAEwBA,EAAK,aAAa;AAAA,sDACZA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA,oFAGNA,EAAK,KAAK;AAAA,oFACVA,EAAK,KAAK;AAAA,oFACVA,EAAK,QAAQ;AAAA,oFACbA,EAAK,SAAS;AAAA;AAAA;AAAA,SAK7F,EACA,KAAK,EAAE,EACVF,EAAQ,UAAY,uBAAuBC,CAAW,QAEvC,IAAIE,EAAe,aAAc,CAE9C,aAAc,MACd,aAAc,GAClB,CAAG,CACH,EAEA,QAAQ,IAAI,sBAAsB,EC3ClC,CACE,MAAMC,EAAO,SAAS,eAAe,YAAY,EAC3CC,EAAQ,SAAS,eAAe,aAAa,EAC7CC,EAAS,SAAS,eAAe,QAAQ,EAG/CF,EAAK,iBAAiB,SAAU,MAAMG,GAAS,CAC7CA,EAAM,eAAc,EAEpB,MAAMhB,EAAac,EAAM,MAAM,KAAI,EAEnC,GAAId,IAAe,GAAI,CACrB,IAAIiB,EAAU,8BACdC,EAAS,MAAM,CACb,MAAO,SACP,QAASD,EACT,SAAU,UAClB,CAAO,EACD,MACD,CAGDF,EAAO,MAAM,QAAU,QAEvB,MAAM,WAAW,SAAY,CAC3B,GAAI,CACF,IAAII,EAAW,MAAMpB,EAAQC,CAAU,EACvC,QAAQ,IAAI,SAAUmB,CAAQ,EAC9B,MAAMX,EAAOW,EAAS,KAGtB,GAFA,QAAQ,IAAI,UAAWX,CAAI,EAEvBA,EAAK,SAAW,EAAG,CACrBD,EAAWC,CAAI,EACfU,EAAS,MAAM,CACb,QAAS,iEAAiElB,CAAU,sBAChG,CAAW,EACD,MACD,CAEDO,EAAWC,CAAI,CAChB,OAAQF,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CY,EAAS,MAAM,CACb,MAAO,SACP,QACE,kEACZ,CAAS,CACT,QAAgB,CAERH,EAAO,MAAM,QAAU,OACvBF,EAAK,MAAK,CACX,CACF,EAAE,IAAI,CAGX,CAAG,CAqCH"}